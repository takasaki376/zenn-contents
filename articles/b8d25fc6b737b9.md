---
title: "Oracle 19cã‚’Miracle Linuxã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹"
emoji: "ğŸ¦"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["oracle", "linux"]
published: false
---

# æ¦‚è¦

Windows10 Pro ç«¯æœ«ã®ãƒ­ãƒ¼ã‚«ãƒ«ã«ä»®æƒ³ç’°å¢ƒï¼ˆMiracle Linix 8.4ï¼‰ã‚’ä½œæˆã—ã€Oracle 19C ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

# OracleDtabase19c ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰

[Oracle å…¬å¼ãƒšãƒ¼ã‚¸](https://www.oracle.com/jp/database/technologies/oracle-database-software-downloads.html)ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã€‚

![ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰](https://storage.googleapis.com/zenn-user-upload/782ecc61421f0e9fac023175.jpg)

ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€å¾Œã»ã© Linux ç’°å¢ƒã¸ FTP ãªã©ã§ä»®æƒ³ãƒã‚·ãƒ³ã¸æ ¼ç´ã—ã¦ä¸‹ã•ã„ã€‚
æ ¼ç´å ´æ‰€ã¯`/u01/app/oracle/product/19.3.0/dbhome_1`ã«ãªã‚Šã¾ã™ã€‚

# ç’°å¢ƒè¨­å®š

ä»¥ä¸‹ã®è¨­å®šå¤‰æ›´ã¯ root ãƒ¦ãƒ¼ã‚¶ã§å®Ÿè¡Œã—ã¦ä¸‹ã•ã„ã€‚

## THP ã®è¨­å®š

`GRUB_CMDLINE_LINUX`ã®è¨­å®šå€¤ã«`transparent_hugepage=never` ã®è¨­å®šã‚’ grub ã«è¿½åŠ ã™ã‚‹

```shell:bash
[root@dlp ~]# vi /etc/default/grub
```

â€»vi ã‚¨ãƒ‡ã‚£ã‚¿ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ãŒã€vi ã®æ“ä½œæ–¹æ³•ã«ã¤ã„ã¦ã¯èª¬æ˜ã‚’çœç•¥ã—ã¾ã™ã€‚

```diff:/etc/default/grub
- GRUB_CMDLINE_LINUX="crashkernel=auto resume=/dev/mapper/ml-swap rd.lvm.lv=ml/root rd.lvm.lv=ml/swap rhgb quiet"
+ GRUB_CMDLINE_LINUX="crashkernel=auto resume=/dev/mapper/ml-swap rd.lvm.lv=ml/root rd.lvm.lv=ml/swap rhgb quiet transparent_hugepage=never"
```

è¨­å®šã®æœ‰åŠ¹åŒ–

```shell:bash
[root@dlp ~]# grub2-mkconfig -o /boot/grub2/grub.cfg
    Generating grub configuration file ...
    Adding boot menu entry for EFI firmware configuration
    done
```

å†èµ·å‹•ã™ã‚‹ã€‚

```shell:bash
[root@dlp ~]# reboot
```

## ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```shell:bash
[root@dlp ~]# dnf -y install bc binutils elfutils-libelf elfutils-libelf-devel fontconfig-devel glibc glibc-devel ksh libaio libaio-devel libgcc libgcc.i686 libstdc++ libstdc++-devel libXi libXtst libnsl make sysstat gcc gcc-c++ libXrender libXrender-devel libX11 libXau libxcb smartmontools java-1.8.0-openjdk
```

## ã‚«ãƒ¼ãƒãƒ«è¨­å®š

```shell:bash
# ã‚«ãƒ¼ãƒãƒ«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®è¨­å®šç”¨ã®å¤‰æ•°å®šç¾©
[root@dlp ~]# MEMTOTAL=$(free -b | sed -n '2p' | awk '{print $2}')
[root@dlp ~]# SHMMAX=$(expr $MEMTOTAL / 2)
[root@dlp ~]# SHMMNI=4096
[root@dlp ~]# PAGESIZE=$(getconf PAGE_SIZE)
# ã‚«ãƒ¼ãƒãƒ«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®è¨­å®š
# catã‹ã‚‰æœ€å¾Œã®EOFã¾ã¤ã¾ã§ã¾ã¨ã‚ã¦ã‚³ãƒ”ãƒ¼ã—ã¦è²¼ã‚Šä»˜ã‘
  cat > /etc/sysctl.d/50-oracle.conf << EOF
fs.aio-max-nr = 1048576
fs.file-max = 6815744
kernel.shmmax = $SHMMAX
kernel.shmall = $(expr \( $SHMMAX / $PAGESIZE \) \* \( $SHMMNI / 16 \))
kernel.shmmni = $SHMMNI
kernel.sem = 250 32000 100 128
kernel.panic_on_oops = 1
net.ipv4.ip_local_port_range = 9000 65500
net.core.rmem_default = 262144
net.core.rmem_max = 4194304
net.core.wmem_default = 262144
net.core.wmem_max = 1048576
EOF
# ã‚«ãƒ¼ãƒãƒ«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿
  sysctl -p /etc/sysctl.d/50-oracle.conf
```

## ã‚°ãƒ«ãƒ¼ãƒ—ä½œæˆ

```shell:bash
#ã€€DBç”¨ã‚°ãƒ«ãƒ¼ãƒ—ä½œæˆ
[root@dlp ~]# groupadd -g 54321 oinstall
[root@dlp ~]# groupadd -g 54322 dba
[root@dlp ~]# groupadd -g 54323 oper
[root@dlp ~]# groupadd -g 54324 backupdba
[root@dlp ~]# groupadd -g 54325 dgdba
[root@dlp ~]# groupadd -g 54326 kmdba
[root@dlp ~]# groupadd -g 54327 asmdba
[root@dlp ~]# groupadd -g 54328 asmoper
[root@dlp ~]# groupadd -g 54329 asmadmin
[root@dlp ~]# groupadd -g 54330 racdba

# ã‚°ãƒ«ãƒ¼ãƒ—ç¢ºèª
  cat /etc/group
  (çœç•¥)
  oinstall:x:54321:
  dba:x:54322:
  oper:x:54323:
  backupdba:x:54324:
  dgdba:x:54325:
  kmdba:x:54326:
  asmdba:x:54327:
  asmoper:x:54328:
  asmadmin:x:54329:
  racdba:x:54330:
```

## ãƒ¦ãƒ¼ã‚¶ä½œæˆ

oracle ãƒ¦ãƒ¼ã‚¶ã‚’ä½œæˆã™ã‚‹ã€‚

```shell:bash
[root@dlp ~]# useradd -u 54321 -g oinstall -G dba,oper,backupdba,dgdba,kmdba,asmdba,racdba -d /usr/oracle oracle
[root@dlp ~]# passwd oracle
```

oracle ãƒ¦ãƒ¼ã‚¶ã§ sudo ã‚’å®Ÿè¡Œå¯èƒ½ã«ã™ã‚‹ã€‚

```shell:bash
[root@dlp ~]# visudo
```

æœ€çµ‚è¡Œã«è¿½åŠ ã™ã‚‹

```diff:visudo
+ oracle ALL=(ALL) ALL
```

## ç’°å¢ƒè¨­å®š

```shell:bash
[root@dlp ~]# vi /etc/security/limits.d/50-oracle.conf
```

```diff:50-oracle.conf
oracle soft nofile 1024
oracle hard nofile 65536
oracle soft nproc 16384
oracle hard nproc 16384
oracle soft stack 10240
oracle hard stack 32768
oracle hard memlock 134217728
oracle soft memlock 134217728
```

## ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ

```shell:bash
[root@dlp ~]# mkdir -p /u01/app/oracle/product/19.3.0/dbhome_1
[root@dlp ~]# chown -R oracle:oinstall /u01/app
[root@dlp ~]# chmod -R 755 /u01
```

â€»ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸ`LINUX.X64_193000_db_home.zip`ã‚’`/u01/app/oracle/product/19.3.0/dbhome_1`ã«æ ¼ç´ã—ã¦ä¸‹ã•ã„ã€‚

# Oracle ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

oracle ãƒ¦ãƒ¼ã‚¶ã§ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ä¸‹ã•ã„ã€‚

## ç’°å¢ƒå¤‰æ•°ã®è¨­å®š

SIDã€ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ»ã‚»ãƒƒãƒˆã¯ä»Šå›ã¯ Unicode ã§é€²ã‚ã¾ã™ãŒä»»æ„ã®è¨­å®šã«å¤‰æ›´ã—ã¦ä¸‹ã•ã„ã€‚

```shell:bash
[oracle@dlp ~]$ vi ~/.bash_profile
```

```diff:.bash_profile
umask 022
export ORACLE_BASE=/u01/app/oracle
export ORACLE_HOME=/u01/app/oracle/product/19.3.0/dbhome_1
export PATH=$PATH:$ORACLE_HOME/bin
export ORACLE_SID=orcl
export NLS_LANG=Japanese_Japan.AL32UTF8
export PATH=$ORACLE_HOME/bin:$PATH
export LANG=ja_JP.UTF-8
export CV_ASSUME_DISTID=RHEL8.2
```

ç’°å¢ƒå¤‰æ•°ã‚’åæ˜ ã—ã¾ã™ã€‚

```shell:bash
[oracle@dlp ~]#
  source /home/oracle/.bash_profile
```

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ãƒ¼è§£å‡

```shell:bash
  cd /u01/app/oracle/product/19.3.0/dbhome_1
  ls -l
    -rw-rw-r--. 1 tsuser tsuser 3059705302 10æœˆ 31 12:49 LINUX.X64_193000_db_home.zip
  unzip LINUX.X64_193000_db_home.zip
```

## JRE ã®æ—¥æœ¬èªåŒ–å¯¾å¿œ

oracle ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ãƒ¼ã«ä»˜å±ã® JRE ã¯æ—¥æœ¬èªã«å¯¾å¿œã—ã¦ã„ãªã„ãŸã‚ã€æœ€åˆã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸ jreï¼ˆjdk ã®ä¸­ã«ã‚ã‚‹ï¼‰ã¨å…¥ã‚Œæ›¿ãˆã‚‹ã€‚

â€»ä¸‹è¨˜ã®ãƒ•ã‚©ãƒ«ãƒ€åã«ã‚ã‚‹`java-1.8.0-openjdk-1.8.0.312.b07-1.el8.x86_64`ã®éƒ¨åˆ†ã¯ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ™‚ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã‚ˆã£ã¦å¤‰ã‚ã‚‹ãŸã‚ã€ãƒ•ã‚©ãƒ«ãƒ€åã‚’ç¢ºèªã—ã¦ä¸‹ã•ã„ã€‚

```shell:bash
[oracle@dlp ~]$ mv /u01/app/oracle/product/19.3.0/dbhome_1/jdk/jre /u01/app/oracle/product/19.3.0/dbhome_1/jdk/jre_org
[oracle@dlp ~]$  readlink -e /usr/bin/java /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.312.b07-1.el8.x86_64/jre
[oracle@dlp ~]$  cp -r /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.312.b07-1.el8.x86_64/jre /u01/app/oracle/product/19.3.0/dbhome_1/jdk/jre
[oracle@dlp ~]$  ll /u01/app/oracle/product/19.3.0/dbhome_1/jdk
    åˆè¨ˆ 5384
      -rwxr-xr-x. 1 oracle oinstall    3244  4æœˆ 17  2019 COPYRIGHT
      -rwxr-xr-x. 1 oracle oinstall      40  4æœˆ 17  2019 LICENSE
      -rwxr-xr-x. 1 oracle oinstall     159  4æœˆ 17  2019 README.html
      -rwxr-xr-x. 1 oracle oinstall  108109  4æœˆ 17  2019 THIRDPARTYLICENSEREADME-JAVAFX.txt
      -rwxr-xr-x. 1 oracle oinstall  155002  4æœˆ 17  2019 THIRDPARTYLICENSEREADME.txt
      drwxr-xr-x. 2 oracle oinstall    4096  4æœˆ 18  2019 bin
      drwxr-xr-x. 3 oracle oinstall    4096  4æœˆ 17  2019 include
      -rwxr-xr-x. 1 oracle oinstall 5207434  4æœˆ 17  2019 javafx-src.zip
      drwxr-xr-x. 4 oracle oinstall    4096 11æœˆ  3 16:17 jre
      drwxr-xr-x. 5 oracle oinstall    4096  4æœˆ 18  2019 jre_org
      drwxr-xr-x. 5 oracle oinstall    4096  4æœˆ 17  2019 lib
      -rwxr-xr-x. 1 oracle oinstall     424  4æœˆ 17  2019 release
```

`jre`ãƒ•ã‚©ãƒ«ãƒ€ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ï¼ˆ`drwxr-xr-x. 4 oracle oinstall 4096 11æœˆ 3 16:17 jre`ã®è¡Œï¼‰

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«é–‹å§‹

ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã« oracle ãƒ¦ãƒ¼ã‚¶ã§ãƒ­ã‚°ã‚¤ãƒ³ã—ã€ä¸‹è¨˜ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‹ã‚‰å®Ÿè¡Œã—ã¦ä¸‹ã•ã„ã€‚
ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç”¨ã®ç”»é¢ãŒèµ·å‹•ã—ã¾ã™ã€‚

```shell:bash
[oracle@dlp ~]$ cd /u01/app/oracle/product/19.3.0/dbhome_1
[oracle@dlp ~]$ ./runInstaller
```

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç”»é¢ãŒèµ·å‹•ã—ã¾ã™ã€‚`æ¬¡ã¸`ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ä¸‹ã•ã„ã€‚

![ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](https://storage.googleapis.com/zenn-user-upload/4cd537c51966f2d73177a688.jpg)

`ã‚µãƒ¼ãƒãƒ¼ãƒ»ã‚¯ãƒ©ã‚¹`ã‚’é¸æŠã—ã¦ã€`æ¬¡ã¸`ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ä¸‹ã•ã„ã€‚
![ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](https://storage.googleapis.com/zenn-user-upload/ed2280048ab81f5671fe7d6d.jpg)

ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ã‚¨ãƒ‡ã‚£ã‚·ãƒ§ãƒ³ã¯ä»»æ„ã®ã‚¨ãƒ‡ã‚£ã‚·ãƒ§ãƒ³ã‚’é¸æŠã—ã€`æ¬¡ã¸`ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ä¸‹ã•ã„ã€‚
![ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](https://storage.googleapis.com/zenn-user-upload/4a29921ebedda5f9b5bf4aa1.jpg)

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å…ˆã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¯å¤‰æ›´ã›ãšã«ã€`æ¬¡ã¸`ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ä¸‹ã•ã„ã€‚
![ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](https://storage.googleapis.com/zenn-user-upload/c805e3833a51fb77de010b6b.jpg)

ä½•ã‚‚å¤‰æ›´ã›ãšã«ã€`æ¬¡ã¸`ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ä¸‹ã•ã„ã€‚
![ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](https://storage.googleapis.com/zenn-user-upload/2df6523bee9c6621b316c785.jpg)

ä½•ã‚‚å¤‰æ›´ã›ãšã«ã€`æ¬¡ã¸`ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ä¸‹ã•ã„ã€‚
![ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](https://storage.googleapis.com/zenn-user-upload/14139899518a2d658e11d6d6.jpg)

ä½•ã‚‚å¤‰æ›´ã›ãšã«ã€`æ¬¡ã¸`ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ä¸‹ã•ã„ã€‚
![ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](https://storage.googleapis.com/zenn-user-upload/03c094caa19c89b9c40e052d.jpg)

ãƒ¡ãƒ¢ãƒªã®å‰²ã‚Šå½“ã¦é‡ã¯ä»»æ„ã®å€¤ã«å¤‰æ›´ã—ã¦ä¸‹ã•ã„ã€‚
ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ»ã‚»ãƒƒãƒˆã¯ä»Šå›ã¯ Unicode ã§é€²ã‚ã¾ã™ãŒä»»æ„ã®è¨­å®šã«å¤‰æ›´ã—ã¦ä¸‹ã•ã„ã€‚
`æ¬¡ã¸`ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ä¸‹ã•ã„ã€‚
![ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](https://storage.googleapis.com/zenn-user-upload/647ff2875bd41bd4486446ec.jpg)
![ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](https://storage.googleapis.com/zenn-user-upload/09cb36f9eebffea18cc07adc.jpg)
![ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](https://storage.googleapis.com/zenn-user-upload/4fae92d7a89bbd49e68b67b9.jpg)

ä½•ã‚‚å¤‰æ›´ã›ãšã«ã€`æ¬¡ã¸`ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ä¸‹ã•ã„ã€‚
![ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](https://storage.googleapis.com/zenn-user-upload/ef920b0f7a5bdd490c00ef3c.jpg)

ä½•ã‚‚å¤‰æ›´ã›ãšã«ã€`æ¬¡ã¸`ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ä¸‹ã•ã„ã€‚
![ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](https://storage.googleapis.com/zenn-user-upload/1be56d257c3dbfbd71f8420e.jpg)

ä½•ã‚‚å¤‰æ›´ã›ãšã«ã€`æ¬¡ã¸`ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ä¸‹ã•ã„ã€‚
![ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](https://storage.googleapis.com/zenn-user-upload/c2d1faac6968e97b7de3f1b4.jpg)

`ã™ã¹ã¦ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«åŒã˜ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ä½¿ç”¨`ã‚’é¸æŠã—ã€ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›å¾Œã«`æ¬¡ã¸`ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ä¸‹ã•ã„ã€‚
![ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](https://storage.googleapis.com/zenn-user-upload/5883ceda1dcf7fb1fb3267d9.jpg)

ä½•ã‚‚å¤‰æ›´ã›ãšã«ã€`æ¬¡ã¸`ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ä¸‹ã•ã„ã€‚
![ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](https://storage.googleapis.com/zenn-user-upload/c6775902c3786ca4cb77e72c.jpg)

`æ§‹æˆã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’è‡ªå‹•çš„ã«å®Ÿè¡Œ`ã‚’ãƒã‚§ãƒƒã‚¯ã—ã€`rootãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è³‡æ ¼è¨¼æ˜ã‚’ä½¿ç”¨`ãŒãƒã‚§ãƒƒã‚¯ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã€root ãƒ¦ãƒ¼ã‚¶ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ä¸‹ã•ã„ã€‚
![ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](https://storage.googleapis.com/zenn-user-upload/7c73652b88747afa88c29561.jpg)

`ã™ã¹ã¦ç„¡è¦–`ã‚’ãƒã‚§ãƒƒã‚¯ã—ã€`æ¬¡ã¸`ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ä¸‹ã•ã„ã€‚
![ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](https://storage.googleapis.com/zenn-user-upload/7fd42d63b55a712b9144e8f7.jpg)

ç¢ºèªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã®ã§ã€`ã¯ã„`ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ä¸‹ã•ã„ã€‚
![ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](https://storage.googleapis.com/zenn-user-upload/8458a42acfdf748d4c671143.jpg)

`ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«`ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ä¸‹ã•ã„ã€‚
![ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](https://storage.googleapis.com/zenn-user-upload/fb0873bca76b6840d86534dd.jpg)

é€”ä¸­ã§ã€`ãƒ•ã‚¡ã‚¤ãƒ«%fileName%ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“`ã¨è¡¨ç¤ºã•ã‚ŒãŸã‚‰ã€`ç¶šè¡Œ`ã‚’æŠ¼ã—ã¾ã™ã€‚

![ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](https://storage.googleapis.com/zenn-user-upload/602714ed41e3b0b8e0efc6cf.jpg)

æ§‹æˆã‚¹ã‚¯ãƒªãƒ—ãƒˆã®å®Ÿè¡Œã®ç¢ºèªãŒå‡ºãŸã‚‰ã€`ã¯ã„`ã‚’æŠ¼ã—ã¾ã™ã€‚

![ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](https://storage.googleapis.com/zenn-user-upload/c2aba17ee7e85a2a376e9ad6.jpg)

ã“ã®ç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã¨ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å®Œäº†ã§ã™ã€‚`é–‰ã˜ã‚‹`ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ä¸‹ã•ã„ã€‚

![ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](https://storage.googleapis.com/zenn-user-upload/ad62ef867cfa2df7e6935de4.jpg)

## ã‚µãƒ¼ãƒ“ã‚¹ä½œæˆ

### dbstart ãŠã‚ˆã³ dbshut ã®è¨±å¯è¨­å®š

```shell:bash
[oracle@dlp ~]$ vi /etc/oratab
```

```diff:oratab
- orcl:/u01/app/oracle/product/19.3.0/dbhome_1:N
+ orcl:/u01/app/oracle/product/19.3.0/dbhome_1:Y
```

### ã‚µãƒ¼ãƒ“ã‚¹ç”¨ã®ç’°å¢ƒå¤‰æ•°è¨­å®š(ãƒ•ã‚¡ã‚¤ãƒ«ã®æ–°è¦ä½œæˆ)

```shell:bash
[oracle@dlp ~]$ vi /etc/sysconfig/oracle.oracledb
```

```diff:oracle.oracledb
ORACLE_BASE=/u01/app/oracle
ORACLE_HOME=/u01/app/oracle/product/19.3.0/dbhome_1
ORACLE_SID=orcl
```

### ãƒªã‚¹ãƒŠãƒ¼ç”¨ã®ã‚µãƒ¼ãƒ“ã‚¹ä½œæˆ

```shell:bash
[root@dlp ~]# vi /usr/lib/systemd/system/oracle@lsnrctl.service
```

```diff:oracle@lsnrctl.service
[Unit]
Description=Oracle Net Listener
After=network.targe

[Service]
Type=forking
EnvironmentFile=/etc/sysconfig/oracle.oracledb
ExecStart=/u01/app/oracle/product/19.3.0/dbhome_1/bin/lsnrctl start
ExecStop=/u01/app/oracle/product/19.3.0/dbhome_1/bin/lsnrctl stop
User=oracle

[Install]
WantedBy=multi-user.target
```

### Oracle Database19c ã®ã‚µãƒ¼ãƒ“ã‚¹ä½œæˆ

```shell:bash
[root@dlp ~]# vi /usr/lib/systemd/system/oracle@oracledb.service
```

```diff:oracle@oracledb.service
[Unit]
Description=Oracle Database service
After=network.target lsnrctl.service

[Service]
Type=forking
EnvironmentFile=/etc/sysconfig/oracle.oracledb
ExecStart=/u01/app/oracle/product/19.3.0/dbhome_1/bin/dbstart $ORACLE_HOME
ExecStop=/u01/app/oracle/product/19.3.0/dbhome_1/bin/dbshut $ORACLE_HOME
User=oracle

[Install]
WantedBy=multi-user.target
```

### ã‚µãƒ¼ãƒ“ã‚¹ã®ç™»éŒ²ãƒ»èµ·å‹•

```shell:bash
[root@dlp ~]# systemctl daemon-reload
[root@dlp ~]# systemctl enable --now oracle@lsnrctl oracle@oracledb
Created symlink /etc/systemd/system/multi-user.target.wants/oracle@lsnrctl.service â†’ /usr/lib/systemd/system/oracle@lsnrctl.service.
Created symlink /etc/systemd/system/multi-user.target.wants/oracle@oracledb.service â†’ /usr/lib/systemd/system/oracle@oracledb.service.
Job for oracle@lsnrctl.service failed because the control process exited with error code.
See "systemctl status oracle@lsnrctl.service" and "journalctl -xe" for details.
```

# èµ·å‹•ç¢ºèª

â‡’ ã‚µãƒ¼ãƒ“ã‚¹èµ·å‹•ã—ã¦ã„ãªã„

```shell:bash
[oracle@dlp ~]$ systemctl status oracle@lsnrctl
oracle@lsnrctl.service - Oracle Net Listener
   Loaded: loaded (/usr/lib/systemd/system/oracle@lsnrctl.service; enabled; vendor preset: disabled)
   Active: failed (Result: exit-code) since Sun 2021-12-05 20:56:03 JST; 11min ago
  Process: 9160 ExecStart=/u01/app/oracle/product/19.3.0/dbhome_1/bin/lsnrctl start (code=exited, status=1/FAILURE)

12æœˆ 05 20:56:03 dbsv lsnrctl[9160]: Log messages written to /u01/app/oracle/diag/tnslsnr/dbsv/listener/alert/log.xml
12æœˆ 05 20:56:03 dbsv lsnrctl[9160]: Error listening on: (DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=dbsv.mshome.net)(POR>
12æœˆ 05 20:56:03 dbsv lsnrctl[9160]: TNS-12545: Connect failed because target host or object does not exist
12æœˆ 05 20:56:03 dbsv lsnrctl[9160]:  TNS-12560: TNS:protocol adapter error
12æœˆ 05 20:56:03 dbsv lsnrctl[9160]:   TNS-00515: Connect failed because target host or object does not exist
12æœˆ 05 20:56:03 dbsv lsnrctl[9160]:    Linux Error: 11: Resource temporarily unavailable
12æœˆ 05 20:56:03 dbsv lsnrctl[9160]: Listener failed to start. See the error message(s) above...
12æœˆ 05 20:56:03 dbsv systemd[1]: oracle@lsnrctl.service: Control process exited, code=exited status=1
12æœˆ 05 20:56:03 dbsv systemd[1]: oracle@lsnrctl.service: Failed with result 'exit-code'.
12æœˆ 05 20:56:03 dbsv systemd[1]: Failed to start Oracle Net Listener.
```

```shell:bash
[oracle@dlp ~]$ systemctl status oracle@oracledb
oracle@oracledb.service - Oracle Database service
   Loaded: loaded (/usr/lib/systemd/system/oracle@oracledb.service; enabled; vendor preset: disabled)
   Active: failed (Result: timeout) since Sun 2021-12-05 20:56:23 JST; 11min ago
  Process: 9159 ExecStart=/u01/app/oracle/product/19.3.0/dbhome_1/bin/dbstart $ORACLE_HOME (code=killed, signal=TERM)

12æœˆ 05 20:54:52 dbsv systemd[1]: Starting Oracle Database service...
12æœˆ 05 20:55:23 dbsv dbstart[9159]: Processing Database instance "orcl": log file /u01/app/oracle/product/19.3.0/dbhom>
12æœˆ 05 20:56:23 dbsv systemd[1]: oracle@oracledb.service: start operation timed out. Terminating.
12æœˆ 05 20:56:23 dbsv systemd[1]: oracle@oracledb.service: Failed with result 'timeout'.
12æœˆ 05 20:56:23 dbsv systemd[1]: Failed to start Oracle Database service.
```

## 1521 ãƒãƒ¼ãƒˆç¢ºèª

```shell:bash
[oracle@dlp ~]$ ss -napt | grep 1521
```

# å‚è€ƒãƒšãƒ¼ã‚¸

- [Oracle Dtabase 19cï¼ˆCentOS8ï¼‰](https://daredemose.com/linux/oracle-dtabase-19c/)
- [[ Linux ] CentOS7 grub ã®ç·¨é›† (transparent hugepage ç„¡åŠ¹åŒ–è¨­å®šç·¨)](https://qiita.com/penguin_dream/items/2455a36a634567f4d86b)
- [CentOS 8 : Oracle Database 19c : ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](https://www.server-world.info/query?os=CentOS_8&p=oracle19c&f=2)
- [Hyper-V on Windows10 ç’°å¢ƒã§ä»»æ„ã®å›ºå®š IP ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å‰²ã‚Šå½“ã¦ã‚‹æ–¹æ³•](https://chiritsumo-life.com/20200718/hyperv-closednetwork/)
