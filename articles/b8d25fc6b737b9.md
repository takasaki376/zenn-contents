---
title: "Oracle 19cã‚’Miracle Linuxã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹"
emoji: "ğŸ¦"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["oracle", "linux"]
published: false
---

# æ¦‚è¦

Windows10 Pro ç«¯æœ«ã®ãƒ­ãƒ¼ã‚«ãƒ«ã«ä»®æƒ³ç’°å¢ƒï¼ˆMiracle Linix 8.4ï¼‰ã‚’ä½œæˆã—ã€Oracle 19C ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

# OracleDtabase19c ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰

[Oracle å…¬å¼ãƒšãƒ¼ã‚¸](https://www.oracle.com/jp/database/technologies/oracle-database-software-downloads.html)ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã€‚

![ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰](https://storage.googleapis.com/zenn-user-upload/782ecc61421f0e9fac023175.jpg)

ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€å¾Œã»ã© Linux ç’°å¢ƒã¸ FTP ãªã©ã§ä»®æƒ³ãƒã‚·ãƒ³ã¸æ ¼ç´ã—ã¦ä¸‹ã•ã„ã€‚
æ ¼ç´å ´æ‰€ã¯`/u01/app/oracle/product/19.3.0/dbhome_1`ã«ãªã‚Šã¾ã™ã€‚

# ç’°å¢ƒè¨­å®š

ä»¥ä¸‹ã®è¨­å®šå¤‰æ›´ã¯ root ãƒ¦ãƒ¼ã‚¶ã§å®Ÿè¡Œã—ã¦ä¸‹ã•ã„ã€‚

## THP ã®è¨­å®š

`GRUB_CMDLINE_LINUX`ã®è¨­å®šå€¤ã«`transparent_hugepage=never` ã®è¨­å®šã‚’ grub ã«è¿½åŠ ã™ã‚‹

```shell:zsh
[root@dlp ~]# vi /etc/default/grub
```

â€»vi ã‚¨ãƒ‡ã‚£ã‚¿ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ãŒã€vi ã®æ“ä½œæ–¹æ³•ã«ã¤ã„ã¦ã¯èª¬æ˜ã‚’çœç•¥ã—ã¾ã™ã€‚

```diff:/etc/default/grub
- GRUB_CMDLINE_LINUX="crashkernel=auto resume=/dev/mapper/ml-swap rd.lvm.lv=ml/root rd.lvm.lv=ml/swap rhgb quiet"
+ GRUB_CMDLINE_LINUX="crashkernel=auto resume=/dev/mapper/ml-swap rd.lvm.lv=ml/root rd.lvm.lv=ml/swap rhgb quiet transparent_hugepage=never"
```

è¨­å®šã®æœ‰åŠ¹åŒ–

```shell:zsh
[root@dlp ~]# grub2-mkconfig -o /boot/grub2/grub.cfg
    Generating grub configuration file ...
    Adding boot menu entry for EFI firmware configuration
    done
```

å†èµ·å‹•ã™ã‚‹ã€‚

```shell:zsh
[root@dlp ~]# reboot
```

## ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```shell:zsh
[root@dlp ~]# dnf -y install bc binutils elfutils-libelf elfutils-libelf-devel fontconfig-devel glibc glibc-devel ksh libaio libaio-devel libgcc libgcc.i686 libstdc++ libstdc++-devel libXi libXtst libnsl make sysstat gcc gcc-c++ libXrender libXrender-devel libX11 libXau libxcb smartmontools java-1.8.0-openjdk
```

## ã‚«ãƒ¼ãƒãƒ«è¨­å®š

```shell:zsh
# ã‚«ãƒ¼ãƒãƒ«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®è¨­å®šç”¨ã®å¤‰æ•°å®šç¾©
[root@dlp ~]# MEMTOTAL=$(free -b | sed -n '2p' | awk '{print $2}')
[root@dlp ~]# SHMMAX=$(expr $MEMTOTAL / 2)
[root@dlp ~]# SHMMNI=4096
[root@dlp ~]# PAGESIZE=$(getconf PAGE_SIZE)
# ã‚«ãƒ¼ãƒãƒ«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®è¨­å®š
# catã‹ã‚‰æœ€å¾Œã®EOFã¾ã¤ã¾ã§ã¾ã¨ã‚ã¦ã‚³ãƒ”ãƒ¼ã—ã¦è²¼ã‚Šä»˜ã‘
  cat > /etc/sysctl.d/50-oracle.conf << EOF
fs.aio-max-nr = 1048576
fs.file-max = 6815744
kernel.shmmax = $SHMMAX
kernel.shmall = $(expr \( $SHMMAX / $PAGESIZE \) \* \( $SHMMNI / 16 \))
kernel.shmmni = $SHMMNI
kernel.sem = 250 32000 100 128
kernel.panic_on_oops = 1
net.ipv4.ip_local_port_range = 9000 65500
net.core.rmem_default = 262144
net.core.rmem_max = 4194304
net.core.wmem_default = 262144
net.core.wmem_max = 1048576
EOF
# ã‚«ãƒ¼ãƒãƒ«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿
  sysctl -p /etc/sysctl.d/50-oracle.conf
```

## ã‚°ãƒ«ãƒ¼ãƒ—ä½œæˆ

```shell:zsh
#ã€€DBç”¨ã‚°ãƒ«ãƒ¼ãƒ—ä½œæˆ
[root@dlp ~]# groupadd -g 54321 oinstall
[root@dlp ~]# groupadd -g 54322 dba
[root@dlp ~]# groupadd -g 54323 oper
[root@dlp ~]# groupadd -g 54324 backupdba
[root@dlp ~]# groupadd -g 54325 dgdba
[root@dlp ~]# groupadd -g 54326 kmdba
[root@dlp ~]# groupadd -g 54327 asmdba
[root@dlp ~]# groupadd -g 54328 asmoper
[root@dlp ~]# groupadd -g 54329 asmadmin
[root@dlp ~]# groupadd -g 54330 racdba

# ã‚°ãƒ«ãƒ¼ãƒ—ç¢ºèª
  cat /etc/group
  (çœç•¥)
  oinstall:x:54321:
  dba:x:54322:
  oper:x:54323:
  backupdba:x:54324:
  dgdba:x:54325:
  kmdba:x:54326:
  asmdba:x:54327:
  asmoper:x:54328:
  asmadmin:x:54329:
  racdba:x:54330:
```

## ãƒ¦ãƒ¼ã‚¶ä½œæˆ

oracle ãƒ¦ãƒ¼ã‚¶ã‚’ä½œæˆã™ã‚‹ã€‚

```shell:zsh
[root@dlp ~]# useradd -u 54321 -g oinstall -G dba,oper,backupdba,dgdba,kmdba,asmdba,racdba -d /usr/oracle oracle
[root@dlp ~]# passwd oracle
```

oracle ãƒ¦ãƒ¼ã‚¶ã§ sudo ã‚’å®Ÿè¡Œå¯èƒ½ã«ã™ã‚‹ã€‚

```shell:zsh
[root@dlp ~]# visudo
```

æœ€çµ‚è¡Œã«è¿½åŠ ã™ã‚‹

```diff:visudo
+ oracle ALL=(ALL) ALL
```

## ç’°å¢ƒè¨­å®š

```shell:zsh
[root@dlp ~]# vi /etc/security/limits.d/50-oracle.conf
```

```diff:50-oracle.conf
oracle soft nofile 1024
oracle hard nofile 65536
oracle soft nproc 16384
oracle hard nproc 16384
oracle soft stack 10240
oracle hard stack 32768
oracle hard memlock 134217728
oracle soft memlock 134217728
```

## ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ

```shell:zsh
[root@dlp ~]# mkdir -p /u01/app/oracle/product/19.3.0/dbhome_1
[root@dlp ~]# chown -R oracle:oinstall /u01/app
[root@dlp ~]# chmod -R 755 /u01
```

â€»ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸ`LINUX.X64_193000_db_home.zip`ã‚’`/u01/app/oracle/product/19.3.0/dbhome_1`ã«æ ¼ç´ã—ã¦ä¸‹ã•ã„ã€‚

# Oracle ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

oracle ãƒ¦ãƒ¼ã‚¶ã§ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ä¸‹ã•ã„ã€‚

## ç’°å¢ƒå¤‰æ•°ã®è¨­å®š

SIDã€ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ»ã‚»ãƒƒãƒˆã¯ä»Šå›ã¯ Unicode ã§é€²ã‚ã¾ã™ãŒä»»æ„ã®è¨­å®šã«å¤‰æ›´ã—ã¦ä¸‹ã•ã„ã€‚

```shell:zsh
[oracle@dlp ~]$ vi ~/.bash_profile
```

```diff:.bash_profile
umask 022
export ORACLE_BASE=/u01/app/oracle
export ORACLE_HOME=/u01/app/oracle/product/19.3.0/dbhome_1
export PATH=$PATH:$ORACLE_HOME/bin
export ORACLE_SID=orcl
export NLS_LANG=Japanese_Japan.AL32UTF8
export PATH=$ORACLE_HOME/bin:$PATH
export LANG=ja_JP.UTF-8
export CV_ASSUME_DISTID=RHEL8.2
```

ç’°å¢ƒå¤‰æ•°ã‚’åæ˜ ã—ã¾ã™ã€‚

```shell:zsh
[oracle@dlp ~]#
  source /home/oracle/.bash_profile
```

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ãƒ¼è§£å‡

```shell:zsh
  cd /u01/app/oracle/product/19.3.0/dbhome_1
  ls -l
    -rw-rw-r--. 1 tsuser tsuser 3059705302 10æœˆ 31 12:49 LINUX.X64_193000_db_home.zip
  unzip LINUX.X64_193000_db_home.zip
```

## JRE ã®æ—¥æœ¬èªåŒ–å¯¾å¿œ

oracle ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ãƒ¼ã«ä»˜å±ã® JRE ã¯æ—¥æœ¬èªã«å¯¾å¿œã—ã¦ã„ãªã„ãŸã‚ã€æœ€åˆã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸ jreï¼ˆjdk ã®ä¸­ã«ã‚ã‚‹ï¼‰ã¨å…¥ã‚Œæ›¿ãˆã‚‹ã€‚

â€»ä¸‹è¨˜ã®ãƒ•ã‚©ãƒ«ãƒ€åã«ã‚ã‚‹`java-1.8.0-openjdk-1.8.0.312.b07-1.el8.x86_64`ã®éƒ¨åˆ†ã¯ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ™‚ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã‚ˆã£ã¦å¤‰ã‚ã‚‹ãŸã‚ã€ãƒ•ã‚©ãƒ«ãƒ€åã‚’ç¢ºèªã—ã¦ä¸‹ã•ã„ã€‚

```shell:zsh
[oracle@dlp ~]$ mv /u01/app/oracle/product/19.3.0/dbhome_1/jdk/jre /u01/app/oracle/product/19.3.0/dbhome_1/jdk/jre_org
[oracle@dlp ~]$  readlink -e /usr/bin/java /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.312.b07-1.el8.x86_64/jre
[oracle@dlp ~]$  cp -r /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.312.b07-1.el8.x86_64/jre /u01/app/oracle/product/19.3.0/dbhome_1/jdk/jre
[oracle@dlp ~]$  ll /u01/app/oracle/product/19.3.0/dbhome_1/jdk
    åˆè¨ˆ 5384
      -rwxr-xr-x. 1 oracle oinstall    3244  4æœˆ 17  2019 COPYRIGHT
      -rwxr-xr-x. 1 oracle oinstall      40  4æœˆ 17  2019 LICENSE
      -rwxr-xr-x. 1 oracle oinstall     159  4æœˆ 17  2019 README.html
      -rwxr-xr-x. 1 oracle oinstall  108109  4æœˆ 17  2019 THIRDPARTYLICENSEREADME-JAVAFX.txt
      -rwxr-xr-x. 1 oracle oinstall  155002  4æœˆ 17  2019 THIRDPARTYLICENSEREADME.txt
      drwxr-xr-x. 2 oracle oinstall    4096  4æœˆ 18  2019 bin
      drwxr-xr-x. 3 oracle oinstall    4096  4æœˆ 17  2019 include
      -rwxr-xr-x. 1 oracle oinstall 5207434  4æœˆ 17  2019 javafx-src.zip
      drwxr-xr-x. 4 oracle oinstall    4096 11æœˆ  3 16:17 jre
      drwxr-xr-x. 5 oracle oinstall    4096  4æœˆ 18  2019 jre_org
      drwxr-xr-x. 5 oracle oinstall    4096  4æœˆ 17  2019 lib
      -rwxr-xr-x. 1 oracle oinstall     424  4æœˆ 17  2019 release
```

`jre`ãƒ•ã‚©ãƒ«ãƒ€ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ï¼ˆ`drwxr-xr-x. 4 oracle oinstall 4096 11æœˆ 3 16:17 jre`ã®è¡Œï¼‰

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«é–‹å§‹

ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã« oracle ãƒ¦ãƒ¼ã‚¶ã§ãƒ­ã‚°ã‚¤ãƒ³ã—ã€ä¸‹è¨˜ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‹ã‚‰å®Ÿè¡Œã—ã¦ä¸‹ã•ã„ã€‚
ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç”¨ã®ç”»é¢ãŒèµ·å‹•ã—ã¾ã™ã€‚

```shell:zsh
[oracle@dlp ~]$ cd /u01/app/oracle/product/19.3.0/dbhome_1
[oracle@dlp ~]$ ./runInstaller
```

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç”»é¢ãŒèµ·å‹•ã—ã¾ã™ã€‚`æ¬¡ã¸`ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ä¸‹ã•ã„ã€‚

![ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](https://storage.googleapis.com/zenn-user-upload/4cd537c51966f2d73177a688.jpg)

`ã‚µãƒ¼ãƒãƒ¼ãƒ»ã‚¯ãƒ©ã‚¹`ã‚’é¸æŠã—ã¦ã€`æ¬¡ã¸`ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ä¸‹ã•ã„ã€‚
![ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](https://storage.googleapis.com/zenn-user-upload/ed2280048ab81f5671fe7d6d.jpg)

ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ã‚¨ãƒ‡ã‚£ã‚·ãƒ§ãƒ³ã¯ä»»æ„ã®ã‚¨ãƒ‡ã‚£ã‚·ãƒ§ãƒ³ã‚’é¸æŠã—ã€`æ¬¡ã¸`ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ä¸‹ã•ã„ã€‚
![ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](https://storage.googleapis.com/zenn-user-upload/4a29921ebedda5f9b5bf4aa1.jpg)

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å…ˆã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¯å¤‰æ›´ã›ãšã«ã€`æ¬¡ã¸`ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ä¸‹ã•ã„ã€‚
![ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](https://storage.googleapis.com/zenn-user-upload/c805e3833a51fb77de010b6b.jpg)

ä½•ã‚‚å¤‰æ›´ã›ãšã«ã€`æ¬¡ã¸`ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ä¸‹ã•ã„ã€‚
![ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](https://storage.googleapis.com/zenn-user-upload/2df6523bee9c6621b316c785.jpg)

ä½•ã‚‚å¤‰æ›´ã›ãšã«ã€`æ¬¡ã¸`ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ä¸‹ã•ã„ã€‚
![ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](https://storage.googleapis.com/zenn-user-upload/14139899518a2d658e11d6d6.jpg)

ä½•ã‚‚å¤‰æ›´ã›ãšã«ã€`æ¬¡ã¸`ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ä¸‹ã•ã„ã€‚
![ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](https://storage.googleapis.com/zenn-user-upload/03c094caa19c89b9c40e052d.jpg)

ãƒ¡ãƒ¢ãƒªã®å‰²ã‚Šå½“ã¦é‡ã¯ä»»æ„ã®å€¤ã«å¤‰æ›´ã—ã¦ä¸‹ã•ã„ã€‚
ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ»ã‚»ãƒƒãƒˆã¯ä»Šå›ã¯ Unicode ã§é€²ã‚ã¾ã™ãŒä»»æ„ã®è¨­å®šã«å¤‰æ›´ã—ã¦ä¸‹ã•ã„ã€‚
`æ¬¡ã¸`ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ä¸‹ã•ã„ã€‚
![ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](https://storage.googleapis.com/zenn-user-upload/647ff2875bd41bd4486446ec.jpg)
![ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](https://storage.googleapis.com/zenn-user-upload/09cb36f9eebffea18cc07adc.jpg)
![ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](https://storage.googleapis.com/zenn-user-upload/4fae92d7a89bbd49e68b67b9.jpg)

ä½•ã‚‚å¤‰æ›´ã›ãšã«ã€`æ¬¡ã¸`ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ä¸‹ã•ã„ã€‚
![ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](https://storage.googleapis.com/zenn-user-upload/ef920b0f7a5bdd490c00ef3c.jpg)

ä½•ã‚‚å¤‰æ›´ã›ãšã«ã€`æ¬¡ã¸`ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ä¸‹ã•ã„ã€‚
![ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](https://storage.googleapis.com/zenn-user-upload/1be56d257c3dbfbd71f8420e.jpg)

ä½•ã‚‚å¤‰æ›´ã›ãšã«ã€`æ¬¡ã¸`ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ä¸‹ã•ã„ã€‚
![ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](https://storage.googleapis.com/zenn-user-upload/c2d1faac6968e97b7de3f1b4.jpg)

`ã™ã¹ã¦ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«åŒã˜ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ä½¿ç”¨`ã‚’é¸æŠã—ã€ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›å¾Œã«`æ¬¡ã¸`ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ä¸‹ã•ã„ã€‚
![ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](https://storage.googleapis.com/zenn-user-upload/5883ceda1dcf7fb1fb3267d9.jpg)

ä½•ã‚‚å¤‰æ›´ã›ãšã«ã€`æ¬¡ã¸`ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ä¸‹ã•ã„ã€‚
![ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](https://storage.googleapis.com/zenn-user-upload/c6775902c3786ca4cb77e72c.jpg)

`æ§‹æˆã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’è‡ªå‹•çš„ã«å®Ÿè¡Œ`ã‚’ãƒã‚§ãƒƒã‚¯ã—ã€`rootãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è³‡æ ¼è¨¼æ˜ã‚’ä½¿ç”¨`ãŒãƒã‚§ãƒƒã‚¯ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã€root ãƒ¦ãƒ¼ã‚¶ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ä¸‹ã•ã„ã€‚
![ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](https://storage.googleapis.com/zenn-user-upload/7c73652b88747afa88c29561.jpg)

`ã™ã¹ã¦ç„¡è¦–`ã‚’ãƒã‚§ãƒƒã‚¯ã—ã€`æ¬¡ã¸`ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ä¸‹ã•ã„ã€‚
![ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](https://storage.googleapis.com/zenn-user-upload/7fd42d63b55a712b9144e8f7.jpg)

ç¢ºèªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã®ã§ã€`ã¯ã„`ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ä¸‹ã•ã„ã€‚
![ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](https://storage.googleapis.com/zenn-user-upload/8458a42acfdf748d4c671143.jpg)

`ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«`ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ä¸‹ã•ã„ã€‚
![ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](https://storage.googleapis.com/zenn-user-upload/fb0873bca76b6840d86534dd.jpg)

é€”ä¸­ã§ã€`ãƒ•ã‚¡ã‚¤ãƒ«%fileName%ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“`ã¨è¡¨ç¤ºã•ã‚ŒãŸã‚‰ã€`ç¶šè¡Œ`ã‚’æŠ¼ã—ã¾ã™ã€‚

![ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](https://storage.googleapis.com/zenn-user-upload/602714ed41e3b0b8e0efc6cf.jpg)

æ§‹æˆã‚¹ã‚¯ãƒªãƒ—ãƒˆã®å®Ÿè¡Œã®ç¢ºèªãŒå‡ºãŸã‚‰ã€`ã¯ã„`ã‚’æŠ¼ã—ã¾ã™ã€‚

![ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](https://storage.googleapis.com/zenn-user-upload/c2aba17ee7e85a2a376e9ad6.jpg)

ã“ã®ç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã¨ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å®Œäº†ã§ã™ã€‚`é–‰ã˜ã‚‹`ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ä¸‹ã•ã„ã€‚

![ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](https://storage.googleapis.com/zenn-user-upload/ad62ef867cfa2df7e6935de4.jpg)

## ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«è¨±å¯è¨­å®š

```shell:zsh
[root@dlp ~]$ firewall-cmd --add-port=1521/tcp --permanent
success
[root@dlp ~]$ firewall-cmd --add-port=5500/tcp --permanent
success
[root@dlp ~]$ firewall-cmd --reload
success
```

### ãƒ•ã‚¡ã‚¤ãƒ¤ãƒ¼ã‚¦ã‚©ãƒ¼ãƒ«ã®è¨±å¯è¨­å®šç¢ºèª

- ports ã« 1521/tcp ãŠã‚ˆã³ 5500/tcp ãŒè¿½åŠ ã•ã‚ŒãŸã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚

```shell:zsh
[root@dlp ~]$ firewall-cmd --list-all
public (active)
  target: default
  icmp-block-inversion: no
  interfaces: eth0
  sources:
  services: cockpit dhcpv6-client ssh
  ports: 1521/tcp 5500/tcp
  protocols:
  masquerade: no
  forward-ports:
  source-ports:
  icmp-blocks:
  rich rules:
```

## hosts è¨­å®š

ãƒ­ãƒ¼ã‚«ãƒ«ç«¯æœ«ã‹ã‚‰æ¥ç¶šã™ã‚‹å ´åˆã€ãƒ­ãƒ¼ã‚«ãƒ«ç«¯æœ«ã«è¨­å®šã™ã‚‹ãƒ›ã‚¹ãƒˆåã«å¯¾ã—ã¦ç´ã¥ã IP ã‚¢ãƒ‰ãƒ¬ã‚¹ãŒã‚µãƒ¼ãƒå´ã¨ä¸€è‡´ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```shell:zsh
[root@dlp ~]# vi /etc/hosts
```

```diff:/etc/hosts
127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
::1         localhost localhost.localdomain localhost6 localhost6.localdomain6
+172.30.10.10 dbsv
```

## listener.ora ç·¨é›†

ãƒ›ã‚¹ãƒˆåã‚’`dbsv`ã«å¤‰æ›´ã—ã¾ã™ã€‚

```shell:zsh
[oracle@dlp ~]$ cd /u01/app/oracle/product/19.3.0/dbhome_1/network/admin
[oracle@dlp ~]$ vi listener.ora
```

â€»`xxxx`ãŒè‡ªå‹•çš„ã«è¨­å®šã•ã‚Œã¦ã„ã‚‹ãƒ›ã‚¹ãƒˆå

```diff:listener.ora
# listener.ora Network Configuration File: /u01/app/oracle/product/19.3.0/dbhome_1/network/admin/listener.ora
# Generated by Oracle configuration tools.

LISTENER =
  (DESCRIPTION_LIST =
    (DESCRIPTION =
-     (ADDRESS = (PROTOCOL = TCP)(HOST = xxxx)(PORT = 1521))
+     (ADDRESS = (PROTOCOL = TCP)(HOST = dbsv)(PORT = 1521))
      (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1521))
    )
  )

```

## tnsnames.ora ç·¨é›†

ãƒ›ã‚¹ãƒˆåã‚’`dbsv`ã«å¤‰æ›´ã™ã‚‹ã€‚

```shell:zsh
[oracle@dlp ~]$ vi tnsnames.ora
```

â€»`xxxx`ãŒè‡ªå‹•çš„ã«è¨­å®šã•ã‚Œã¦ã„ã‚‹ãƒ›ã‚¹ãƒˆå

```diff:tnsnames.ora
# tnsnames.ora Network Configuration File: /u01/app/oracle/product/19.3.0/dbhome_1/network/admin/tnsnames.ora
# Generated by Oracle configuration tools.

LISTENER_ORCL =
- (ADDRESS = (PROTOCOL = TCP)(HOST = xxxx)(PORT = 1521))
+ (ADDRESS = (PROTOCOL = TCP)(HOST = dbsv)(PORT = 1521))


ORCL =
  (DESCRIPTION =
-   (ADDRESS = (PROTOCOL = TCP)(HOST = xxxx)(PORT = 1521))
+   (ADDRESS = (PROTOCOL = TCP)(HOST = dbsv)(PORT = 1521))
    (CONNECT_DATA =
      (SERVER = DEDICATED)
      (SERVICE_NAME = orcl.mshome.net)
    )
  )

```

## ã‚µãƒ¼ãƒ“ã‚¹ä½œæˆ

### dbstart ãŠã‚ˆã³ dbshut ã®è¨±å¯è¨­å®š

```shell:zsh
[oracle@dlp ~]$ vi /etc/oratab
```

```diff:oratab
- orcl:/u01/app/oracle/product/19.3.0/dbhome_1:N
+ orcl:/u01/app/oracle/product/19.3.0/dbhome_1:Y
```

### ã‚µãƒ¼ãƒ“ã‚¹ç”¨ã®ç’°å¢ƒå¤‰æ•°è¨­å®š(ãƒ•ã‚¡ã‚¤ãƒ«ã®æ–°è¦ä½œæˆ)

```shell:zsh
[oracle@dlp ~]$ vi /etc/sysconfig/oracle.oracledb
```

```diff:oracle.oracledb
ORACLE_BASE=/u01/app/oracle
ORACLE_HOME=/u01/app/oracle/product/19.3.0/dbhome_1
ORACLE_SID=orcl
```

### ãƒªã‚¹ãƒŠãƒ¼ç”¨ã®ã‚µãƒ¼ãƒ“ã‚¹ä½œæˆ

```shell:zsh
[root@dlp ~]# vi /usr/lib/systemd/system/oracle@lsnrctl.service
```

```diff:oracle@lsnrctl.service
[Unit]
Description=Oracle Net Listener
After=network.targe

[Service]
Type=forking
EnvironmentFile=/etc/sysconfig/oracle.oracledb
ExecStart=/u01/app/oracle/product/19.3.0/dbhome_1/bin/lsnrctl start
ExecStop=/u01/app/oracle/product/19.3.0/dbhome_1/bin/lsnrctl stop
User=oracle

[Install]
WantedBy=multi-user.target
```

### Oracle Database19c ã®ã‚µãƒ¼ãƒ“ã‚¹ä½œæˆ

```shell:zsh
[root@dlp ~]# vi /usr/lib/systemd/system/oracle@oracledb.service
```

```diff:oracle@oracledb.service
[Unit]
Description=Oracle Database service
After=network.target lsnrctl.service

[Service]
Type=forking
EnvironmentFile=/etc/sysconfig/oracle.oracledb
ExecStart=/u01/app/oracle/product/19.3.0/dbhome_1/bin/dbstart $ORACLE_HOME
ExecStop=/u01/app/oracle/product/19.3.0/dbhome_1/bin/dbshut $ORACLE_HOME
User=oracle

[Install]
WantedBy=multi-user.target
```

### ã‚µãƒ¼ãƒ“ã‚¹ã®ç™»éŒ²ãƒ»èµ·å‹•

```shell:zsh
[root@dlp ~]# systemctl daemon-reload
[root@dlp ~]# systemctl enable --now oracle@lsnrctl oracle@oracledb
Created symlink /etc/systemd/system/multi-user.target.wants/oracle@lsnrctl.service â†’ /usr/lib/systemd/system/oracle@lsnrctl.service.
Created symlink /etc/systemd/system/multi-user.target.wants/oracle@oracledb.service â†’ /usr/lib/systemd/system/oracle@oracledb.service.
Job for oracle@lsnrctl.service failed because the control process exited with error code.
See "systemctl status oracle@lsnrctl.service" and "journalctl -xe" for details.
```

# èµ·å‹•ç¢ºèª

```shell:zsh
[root@dlp ~]# systemctl status oracle@lsnrctl
â— oracle@lsnrctl.service - Oracle Net Listener
   Loaded: loaded (/usr/lib/systemd/system/oracle@lsnrctl.service; enabled; vendor preset: disabled)
   Active: active (running) since Sat 2021-11-06 13:49:11 JST; 15s ago
  Process: 5092 ExecStart=/u01/app/oracle/product/19.3.0/dbhome_1/bin/lsnrctl start (code=exited, status=0/SUCCESS)
 Main PID: 5102 (tnslsnr)
    Tasks: 2 (limit: 23550)
   Memory: 7.1M
   CGroup: /system.slice/system-oracle.slice/oracle@lsnrctl.service
           â””â”€5102 /u01/app/oracle/product/19.3.0/dbhome_1/bin/tnslsnr LISTENER -inherit

 11æœˆ 06 13:49:11 dbsv lsnrctl[5092]: Security                  ON: Local OS Authentication
 11æœˆ 06 13:49:11 dbsv lsnrctl[5092]: SNMP                      OFF
 11æœˆ 06 13:49:11 dbsv lsnrctl[5092]: Listener Parameter File   /u01/app/oracle/product/19.3.0/dbhome_1/network/admin/li>
 11æœˆ 06 13:49:11 dbsv lsnrctl[5092]: Listener Log File         /u01/app/oracle/diag/tnslsnr/dbsv/listener/alert/log.xml
 11æœˆ 06 13:49:11 dbsv lsnrctl[5092]: Listening Endpoints Summary...
 11æœˆ 06 13:49:11 dbsv lsnrctl[5092]:   (DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=127.0.0.1)(PORT=1521)))
 11æœˆ 06 13:49:11 dbsv lsnrctl[5092]:   (DESCRIPTION=(ADDRESS=(PROTOCOL=ipc)(KEY=EXTPROC1521)))
 11æœˆ 06 13:49:11 dbsv lsnrctl[5092]: The listener supports no services
 11æœˆ 06 13:49:11 dbsv lsnrctl[5092]: The command completed successfully
 11æœˆ 06 13:49:11 dbsv systemd[1]: Started Oracle Net Listener.
```

```shell:zsh
[root@dlp ~]# systemctl status oracle@oracledb
â— oracle@oracledb.service - Oracle Database service
   Loaded: loaded (/usr/lib/systemd/system/oracle@oracledb.service; enabled; vendor preset: disabled)
   Active: active (running) since Sat 2021-11-06 10:02:55 JST; 3h 47min ago
    Tasks: 51 (limit: 23550)
   Memory: 1.5G
   CGroup: /system.slice/system-oracle.slice/oracle@oracledb.service
           â”œâ”€2121 ora_pmon_orcl
           â”œâ”€2123 ora_clmn_orcl
           â”œâ”€2125 ora_psp0_orcl
ï¼ˆä»¥ä¸‹ã€çœç•¥ï¼‰
```

## 1521 ãƒãƒ¼ãƒˆç¢ºèª

```shell:zsh
[root@dlp ~]# ss -napt | grep 1521
LISTEN 0      128        127.0.0.1:1521       0.0.0.0:*     users:(("tnslsnr",pid=5102,fd=8))
```

## SqlPlus ã§ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶š

```shell:zsh
[oracle@dlp ~]$ sqlplus sys/password as sysdba@localhost:1521/orcl
SQL*Plus: Release 19.0.0.0.0 - Production on åœŸ 11æœˆ 6 14:00:27 2021
Version 19.3.0.0.0

Copyright (c) 1982, 2019, Oracle.  All rights reserved.



Oracle Database 19c Enterprise Edition Release 19.0.0.0.0 - Production
Version 19.3.0.0.0
ã«æ¥ç¶šã•ã‚Œã¾ã—ãŸã€‚
SQL>
```

```sql
SQL> set linesize 200
SQL> column INSTANCE_NAME format a20
SQL> column host_name format a20
SQL>
SQL>
SQL> select instance_name, host_name, version, startup_time , status from v$instance;

INSTANCE_NAME        HOST_NAME            VERSION           STARTUP_ STATUS
-------------------- -------------------- ----------------- -------- ------------
orcl                 dbsv                 19.0.0.0.0        21-11-06 OPEN
```

## èµ·å‹•ä¸­ã®ã‚µãƒ¼ãƒ“ã‚¹ç¢ºèª

```shell:zsh
[oracle@dlp ~]$ lsnrctl services

LSNRCTL for Linux: Version 19.0.0.0.0 - Production on 06-11æœˆ -2021 15:27:55

Copyright (c) 1991, 2019, Oracle.  All rights reserved.

(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=dbsv)(PORT=1521)))ã«æ¥ç¶šä¸­
ã‚µãƒ¼ãƒ“ã‚¹ã®ã‚µãƒãƒªãƒ¼...
ã‚µãƒ¼ãƒ“ã‚¹"orcl.mshome.net"ã«ã¯ã€1ä»¶ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒã‚ã‚Šã¾ã™ã€‚
  ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹"orcl"ã€çŠ¶æ…‹READYã«ã¯ã€ã“ã®ã‚µãƒ¼ãƒ“ã‚¹ã«å¯¾ã™ã‚‹1ä»¶ã®ãƒãƒ³ãƒ‰ãƒ©ãŒã‚ã‚Šã¾ã™...
    ãƒãƒ³ãƒ‰ãƒ©:
      "DEDICATED" ç¢ºç«‹:0 æ‹’å¦:0 çŠ¶æ…‹:ready
         LOCAL SERVER
```

## ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰ã®æ¥ç¶š (Windows)

### Oracle Instant Client ã® zip ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰

[ã“ã¡ã‚‰](https://www.oracle.com/database/technologies/instant-client/winx64-64-downloads.html)ã‹ã‚‰ä¸‹è¨˜ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰

- Basic Package
- SQL\*Plus Package
- Tools Package
- SDK Package
- JDBC Supplement Package
- ODBC Package

ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å¾Œã«ä»»æ„ã®å ´æ‰€ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è§£å‡ã™ã‚‹ã€‚

### ç’°å¢ƒå¤‰æ•°è¨­å®š

è¨­å®šå¾Œã€ï¼°ï¼£å†èµ·å‹•ã™ã‚‹ã€‚

- Pathï¼šOracle Instant Client ã®è§£å‡å¾Œãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹
- NLS_LANGï¼šJapanese_Japan.JA16SJISTILDE
- TNS_ADMINï¼šOracle Instant Client ã®è§£å‡å¾Œãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹

### tnsnames.ora ã®è¨­å®š

Oracle Instant Client ã®è§£å‡å¾Œãƒ•ã‚©ãƒ«ãƒ€ã«`tnsnames.ora`ã‚’ä½œæˆã™ã‚‹ã€‚

```tnsnames.ora
ORCLDBA =
  (DESCRIPTION =
   (ADDRESS = (PROTOCOL = TCP)(HOST = 172.30.10.10)(PORT = 1521))
    (CONNECT_DATA =
      (SERVER = DEDICATED)
      (SERVICE_NAME = orcl.mshome.net)
    )
  )
```

### SqlPlus æ¥ç¶šç¢ºèª

```bat
> sqlplus sys/password@orcldba as sysdba

SQL*Plus: Release 19.0.0.0.0 - Production on åœŸ 11æœˆ 6 15:29:18 2021
Version 19.13.0.0.0

Copyright (c) 1982, 2021, Oracle.  All rights reserved.



Oracle Database 19c Enterprise Edition Release 19.0.0.0.0 - Production
Version 19.3.0.0.0
ã«æ¥ç¶šã•ã‚Œã¾ã—ãŸã€‚
SQL>
```

# å‚è€ƒãƒšãƒ¼ã‚¸

- [Oracle Dtabase 19cï¼ˆCentOS8ï¼‰](https://daredemose.com/linux/oracle-dtabase-19c/)
- [[ Linux ] CentOS7 grub ã®ç·¨é›† (transparent hugepage ç„¡åŠ¹åŒ–è¨­å®šç·¨)](https://qiita.com/penguin_dream/items/2455a36a634567f4d86b)
- [CentOS 8 : Oracle Database 19c : ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](https://www.server-world.info/query?os=CentOS_8&p=oracle19c&f=2)
- [Hyper-V on Windows10 ç’°å¢ƒã§ä»»æ„ã®å›ºå®š IP ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å‰²ã‚Šå½“ã¦ã‚‹æ–¹æ³•](https://chiritsumo-life.com/20200718/hyperv-closednetwork/)
- [Windows10(64bit)ã« Oracle Instant Client ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã— SQL\*Plus ã‚’ä½¿ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹æ‰‹é †](https://souiunogaii.hatenablog.com/entry/OracleInstantClient-Windows10)
