---
title: "Oracle 19cをMiracle Linuxにインストールする"
emoji: "🦁"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["oracle", "linux"]
published: false
---

# 概要

Windows10 Pro 端末のローカルに仮想環境（Miracle Linix 8.4）を作成し、Oracle 19C をインストールします。

# OracleDtabase19c のダウンロード

[Oracle 公式ページ](https://www.oracle.com/jp/database/technologies/oracle-database-software-downloads.html)からダウンロードする。

-　画像１

ダウンロードが終了したら、Linux 環境へ FTP などで

# 環境設定

## ユーザ作成

oracle ユーザを作成する。

```shell:bash
[root@dlp ~]# useradd oracle
[root@dlp ~]# passwd oracle
```

oracle ユーザで sudo を実行可能にする。

```shell:bash
[root@dlp ~]# visudo
```

`oracle ALL=(ALL) ALL`を最終行に追加する

## THP の設定

`GRUB_CMDLINE_LINUX`の設定値に`transparent_hugepage=never` の設定を grub に追加する

```shell:bash
[root@dlp ~]# vi /etc/default/grub
```

```diff:/etc/default/grub
- GRUB_CMDLINE_LINUX="crashkernel=auto resume=/dev/mapper/ml-swap rd.lvm.lv=ml/root rd.lvm.lv=ml/swap rhgb quiet"
+ GRUB_CMDLINE_LINUX="crashkernel=auto resume=/dev/mapper/ml-swap rd.lvm.lv=ml/root rd.lvm.lv=ml/swap rhgb quiet transparent_hugepage=never"
```

設定の有効化

```shell:bash
[root@dlp ~]# grub2-mkconfig -o /boot/grub2/grub.cfg
Generating grub configuration file ...
Adding boot menu entry for EFI firmware configuration
done
```

再起動する。

```shell:bash
[root@dlp ~]# reboot
```

## ホスト名設定

```shell:bash
# ホスト名確認
[root@dlp ~]# hostnamectl status
   Static hostname: localhost.localdomain
# ホスト名設定
[root@dlp ~]# hostnamectl set-hostname dbsv
# ホスト名確認
[root@dlp ~]# hostnamectl status
   Static hostname: dbsv
```

## パッケージインストール

```shell:bash
[root@dlp ~]# dnf -y install bc binutils elfutils-libelf elfutils-libelf-devel fontconfig-devel glibc glibc-devel ksh libaio libaio-devel libgcc libgcc.i686 libstdc++ libstdc++-devel libXi libXtst libnsl make sysstat gcc gcc-c++ libXrender libXrender-devel libX11 libXau libxcb smartmontools java-1.8.0-openjdk
```

## カーネル設定

```shell:bash
# カーネルパラメータの設定用の変数定義
[root@dlp ~]#
  MEMTOTAL=$(free -b | sed -n '2p' | awk '{print $2}')
  SHMMAX=$(expr $MEMTOTAL / 2)
  SHMMNI=4096
  PAGESIZE=$(getconf PAGE_SIZE)
# カーネルパラメータの設定
# catから最後のEOFまつまでまとめてコピーして貼り付け
  cat > /etc/sysctl.d/50-oracle.conf << EOF
fs.aio-max-nr = 1048576
fs.file-max = 6815744
kernel.shmmax = $SHMMAX
kernel.shmall = $(expr \( $SHMMAX / $PAGESIZE \) \* \( $SHMMNI / 16 \))
kernel.shmmni = $SHMMNI
kernel.sem = 250 32000 100 128
kernel.panic_on_oops = 1
net.ipv4.ip_local_port_range = 9000 65500
net.core.rmem_default = 262144
net.core.rmem_max = 4194304
net.core.wmem_default = 262144
net.core.wmem_max = 1048576
EOF
# カーネルパラメータ読み込み
  sysctl -p /etc/sysctl.d/50-oracle.conf
```

## グループ作成

```shell:bash
#　DB用グループ作成
[root@dlp ~]#
  groupadd -g 54321 oinstall
  groupadd -g 54322 dba
  groupadd -g 54323 oper
  groupadd -g 54324 backupdba
  groupadd -g 54325 dgdba
  groupadd -g 54326 kmdba
  groupadd -g 54327 asmdba
  groupadd -g 54328 asmoper
  groupadd -g 54329 asmadmin
  groupadd -g 54330 racdba
```

# 参考ページ

- [Oracle Dtabase 19c（CentOS8）](https://daredemose.com/linux/oracle-dtabase-19c/)
- [[ Linux ] CentOS7 grub の編集 (transparent hugepage 無効化設定編)](https://qiita.com/penguin_dream/items/2455a36a634567f4d86b)
- [CentOS 8 : Oracle Database 19c : インストール](https://www.server-world.info/query?os=CentOS_8&p=oracle19c&f=2)
